<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Life RPG</title>

<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Inter&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family:Inter, sans-serif;
  background:#fff;
  color:#000;
}
h2{
  font-family:Montserrat, sans-serif;
  font-size:18px;
}
.app{padding:15px;padding-bottom:80px;}
.top-bar{text-align:right;font-weight:bold;}
.avatar-box{display:flex;gap:15px;align-items:center;}
.avatar{
  width:90px;height:90px;border-radius:50%;
  display:flex;align-items:center;justify-content:center;
}
button{
  border:none;border-radius:8px;padding:6px 10px;
  background:#000;color:#fff;
}
.habit{display:flex;justify-content:space-between;margin:6px 0;}
.quote{margin-top:25px;font-style:italic;opacity:.7;}
.tab-bar{
  position:fixed;bottom:0;left:0;right:0;
  height:65px;border-top:1px solid #ddd;
  display:flex;background:#fff;
}
.tab{
  flex:1;text-align:center;font-size:12px;
  color:#888;padding-top:8px;
}
.tab.active{color:#000;font-weight:bold;}
.hidden{display:none;}
.lock{opacity:.4;}
</style>
</head>

<body>

<div class="top-bar">ü™ô <span id="coins"></span></div>

<div class="app">

<div id="home">
  <div class="avatar-box">
    <div class="avatar" id="avatar"></div>
    <div>
      <button onclick="editAvatar()">Editar</button>
      <div>‚ù§Ô∏è <span id="life"></span></div>
      <small>üî• Racha: <span id="streak"></span></small>
    </div>
  </div>

  <h2>H√°bitos</h2>
  <div id="habits"></div>

  <div class="quote" id="quote"></div>
</div>

<div id="aspects" class="hidden">
  <h2>Aspectos</h2>
  <div id="aspectList"></div>
</div>

<div id="shop" class="hidden">
  <h2>Tienda</h2>
  <div id="shopList"></div>
</div>

<div id="achievements" class="hidden">
  <h2>Logros</h2>
  <div id="achievementList"></div>
</div>

</div>

<div class="tab-bar">
  <div class="tab active" onclick="showTab('home',this)">‚¨§<br>Inicio</div>
  <div class="tab" onclick="showTab('aspects',this)">‚¨§<br>Aspectos</div>
  <div class="tab" onclick="showTab('shop',this)">‚¨§<br>Tienda</div>
  <div class="tab" onclick="showTab('achievements',this)">‚¨§<br>Logros</div>
</div>

<script>
let today=new Date().toDateString();

let data=JSON.parse(localStorage.getItem("lifeRPGpro"))||{
  life:10,coins:0,streak:0,lastDay:"",
  avatar:{piel:"#f2d6c9",pelo:"#3a2c1c",ropa:"#555"},
  aspects:{F√≠sico:1,Mental:1,Emocional:1,Social:1,Espiritual:1,Disciplina:1,Constancia:1},
  habits:[
    {name:"Entrenar",type:"bueno",value:2,done:false},
    {name:"Dormir poco",type:"malo",value:1,done:false}
  ],
  shop:[{name:"Salir de joda",price:5}],
  permissions:[],
  achievements:[
    {name:"Primer h√°bito",reward:5,done:false,claimed:false},
    {name:"5 d√≠as limpios",reward:10,done:false,claimed:false,secret:true}
  ]
};

const quotes=[
 "No te est√°s exigiendo de m√°s, est√°s creciendo.",
 "Entrenar cuando no ten√©s ganas es car√°cter.",
 "La disciplina es una forma de amor propio.",
 "Jug√° esta vida como si fuera tu personaje favorito.",
 "Cada d√≠a que cumpl√≠s es experiencia ganada."
];

function save(){localStorage.setItem("lifeRPGpro",JSON.stringify(data));}

function render(){
  if(data.lastDay!==today){
    data.habits.forEach(h=>h.done=false);
    data.lastDay=today;
    save();
  }

  life.innerText="‚ù§Ô∏è".repeat(data.life);
  coins.innerText=data.coins;
  streak.innerText=data.streak;

  avatar.style.background=data.avatar.piel;
  avatar.style.border=`6px solid ${data.avatar.pelo}`;

  habits.innerHTML="";
  data.habits.forEach(h=>{
    let d=document.createElement("div");
    d.className="habit";
    d.innerHTML=`${h.name}
    <button ${h.done?"disabled":""} onclick="doHabit('${h.name}')">‚úî</button>`;
    habits.appendChild(d);
  });

  aspectList.innerHTML="";
  for(let a in data.aspects){
    aspectList.innerHTML+=`${a}: Nivel ${data.aspects[a]}<br>`;
  }

  shopList.innerHTML="";
  data.shop.forEach(s=>{
    let bought=data.permissions.includes(s.name);
    shopList.innerHTML+=`${s.name} (${s.price}ü™ô)
    <button ${bought?"disabled":""} onclick="buy('${s.name}',${s.price})">
    ${bought?"Comprado":"Comprar"}</button><br>`;
  });

  achievementList.innerHTML="";
  data.achievements.forEach(a=>{
    if(a.secret && !a.done) return;
    let d=document.createElement("div");
    d.className=a.done?"":"lock";
    if(a.done && !a.claimed){
      d.innerHTML=`${a.name} <button onclick="claim('${a.name}')">Reclamar</button>`;
    }else if(a.claimed){
      d.innerHTML=`${a.name} ‚úÖ`;
    }else{
      d.innerText=a.name;
    }
    achievementList.appendChild(d);
  });

  quote.innerText=quotes[Math.floor(Math.random()*quotes.length)];
}

function doHabit(name){
  let h=data.habits.find(x=>x.name===name);
  if(h.done) return;
  h.done=true;

  if(h.type==="bueno"){
    data.coins+=h.value;
    data.aspects.F√≠sico++;
    data.streak++;
  }else{
    if(!data.permissions.includes(h.name)){
      data.life-=h.value;
      data.streak=0;
      if(data.life<=0){
        alert("Vida en 0 ‚Üí reto");
        data.life=10;
      }
    }
  }

  if(data.streak>=5) data.achievements[1].done=true;
  data.achievements[0].done=true;

  save();render();
}

function buy(name,price){
  if(data.coins>=price){
    data.coins-=price;
    data.permissions.push(name);
    save();render();
  }
}

function claim(name){
  let a=data.achievements.find(x=>x.name===name);
  if(!a.claimed){
    data.coins+=a.reward;
    a.claimed=true;
    save();render();
  }
}

function editAvatar(){
  let piel=prompt("Color de piel (#hex)",data.avatar.piel);
  let pelo=prompt("Color de pelo (#hex)",data.avatar.pelo);
  let ropa=prompt("Color de ropa (#hex)",data.avatar.ropa);
  if(piel) data.avatar.piel=piel;
  if(pelo) data.avatar.pelo=pelo;
  if(ropa) data.avatar.ropa=ropa;
  save();render();
}

function showTab(id,el){
  document.querySelectorAll(".app > div").forEach(d=>d.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
  document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
  el.classList.add("active");
}

render();
</script>
</body>
</html>
